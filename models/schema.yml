version: 2


models:
  - name: int_sales_margin
    description: 
      This model calculates the margin for each product sold based on the sales data.
    columns:
      - name: date_date
        description: The date of the sales transaction.
        tests:
          - not_null
      - name: orders_id
        description: The unique identifier of the sales order.
        tests:
          - not_null
      - name: products_id
        description: The unique identifier of the product.
        tests:
          - unique:
          - not_null
      - name: revenue
        description: The total revenue generated by the sale.
        tests:
          - not_null
      - name: quantity
        description: The quantity of products sold in the transaction.
        tests:
          - not_null
      - name: purchase_price
        description: The purchase price of the product.
        tests:
          - not_null
      - name: purchase_cost
        description: The total purchase cost of the products sold.
        tests:
          - not_null
      - name: margin
        description: The margin generated from the sale.
        tests:
          - not_null

  - name: int_orders_margin
    description: 
      This model calculates the margin for each sales order based on the sales data.
    columns:
      - name: orders_id
        description: The unique identifier of the sales order.
        tests:
          - unique:
          - not_null
      - name: date_date
        description: The date of the sales transaction.
        tests:
          - not_null
      - name: revenue
        description: The total revenue generated by the sales order.
        tests:
          - not_null
      - name: quantity
        description: The total quantity of products sold in the sales order.
        tests:
          - not_null
      - name: purchase_cost
        description: The total purchase cost of the products sold in the sales order.
        tests:
          - not_null
      - name: margin
        description: The total margin generated from the sales order.
        tests:
          - not_null

  - name: int_orders_operational
    description: 
      This model calculates the operational margin for each sales order based on the sales and shipping data.
    columns:
      - name: orders_id
        description: The unique identifier of the sales order.
        tests:
          - unique
          - not_null
      - name: date_date
        description: The date of the sales transaction.
        tests:
          - not_null
      - name: operational_margin
        description: The operational margin of the sales order.
        tests:
          - not_null
      - name: revenue
        description: The total revenue generated by the sales order.
        tests:
          - not_null
      - name: quantity
        description: The total quantity of products sold in the sales order.
        tests:
          - not_null
      - name: purchase_cost
        description: The total purchase cost of the products sold in the sales order.
        tests:
          - not_null
      - name: margin
        description: The total margin generated from the sales order.
        tests:
          - not_null

  - name: finance_days
    description: 
      This model calculates financial metrics aggregated by date.
    columns:
      - name: date_date
        description: The date for which the financial metrics are calculated.
        tests:
          - unique
          - not_null
      - name: nb_transaction
        description: The number of sales transactions on the date.
        tests:
          - not_null
      - name: revenue
        description: The total revenue generated on the date.
        tests:
          - not_null        
      - name: average_basket
        description: The average basket size on the date.
        tests:
          - not_null
      - name: margin
        description: The total margin generated on the date.
        tests:
          - not_null
      - name: operational_margin
        description: The total operational margin generated on the date.
        tests:
          - not_null
      - name: quantity
        description: The total quantity of products sold on the date.
        tests:
          - not_null
      - name: purchase_cost
        description: The total purchase cost of the products sold on the date.
        tests:
          - not_null